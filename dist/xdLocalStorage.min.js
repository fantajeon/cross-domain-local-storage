!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function a(e,t){var n,a=t||{};for(n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default={extend:a}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=a(i),r=n(3),c=a(r);t.default={xdLocalStorage:o.default,xdLocalStorageEmbedded:c.default}},function(e,t,n){"use strict";function a(e){p[e.id]&&(p[e.id](e),delete p[e.id])}function i(e){var t;try{t=JSON.parse(e.data)}catch(e){}if(t&&t.namespace===m)if("iframe-ready"===t.id){var n=t.ns,i=y.domains[n];i.state="ready",i.initCallback(t)}else a(t)}function o(e,t,n,a,i){v++,p[v]=i;var o={namespace:f,id:v,action:t,key:n,value:a};e.contentWindow.postMessage(JSON.stringify(o),"*")}function r(){window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i)}function c(e,t){e.domains[t.ns]=t}function s(e,t){g=u.default.extend(t,g);var n=document.createElement("div");g.iframeId="cross-domain-local-storage-"+g.nameSpace,n.innerHTML='<iframe id="'+g.iframeId+'" src='+g.iframeUrl+' style="display: none;"></iframe>',document.body.appendChild(n);var a=document.getElementById(g.iframeId);a.state="init",a.ns=g.nameSpace,a.id=g.iframeId,a.initCallback=g.initCallback,c(e,a)}function d(){return"complete"===document.readyState}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l),f="cross-domain-local-message-caller",m="cross-domain-local-message-iframe",g={iframeId:"cross-domain-iframe",iframeUrl:void 0,nameSpace:void 0,initCallback:function(e){}},v=-1,p={},y={domains:{},state:"init"};y.init=function(e){var t=this;return new Promise(function(n,a){if("init"===t.state&&(r(),t.state="hooked"),!e.iframeUrl)throw"You must specify iframeUrl";if(!e.nameSpace)throw"You must speicify namespace";if(d())s(t,e),n({});else{var i=t;document.addEventListener?document.addEventListener("readystatechange",function(){d()?(s(i,e),n({})):a({})}):document.attachEvent("readystatechange",function(){d()?(s(i,e),n({})):a({})})}})},y.setItem=function(e,t,n,a){o(this.domains[e],"set",t,n,a)},y.getItem=function(e,t,n){o(this.domains[e],"get",t,null,n)},y.removeItem=function(e,t,n){o(this.domains[e],"remove",t,null,n)},y.key=function(e,t,n){o(this.domains[e],"key",t,null,n)},y.getSize=function(e,t){o(this.domains[e],"size",null,null,t)},y.getLength=function(e,t){o(this.domains[e],"length",null,null,t)},y.clear=function(e,t){o(this.domains[e],"clear",null,null,t)},window.xdLocalStorage=y,t.default=y},function(e,t,n){"use strict";function a(e){function t(e,t){var n=o.default.extend(t,m);n.id=e,parent.postMessage(JSON.stringify(n),"*")}function n(e,n){t(e,{key:n,value:localStorage.getItem(n)})}function a(e,n,a){localStorage.setItem(n,a),t(e,{success:localStorage.getItem(n)===a})}function i(e,n){localStorage.removeItem(n),t(e,{})}function r(e,n){t(e,{key:localStorage.key(n)})}function c(e){t(e,{size:JSON.stringify(localStorage).length})}function s(e){t(e,{length:localStorage.length})}function d(e){localStorage.clear(),t(e,{})}function l(e){var t;try{t=JSON.parse(e.data)}catch(e){}t&&t.namespace===u&&("set"===t.action?a(t.id,t.key,t.value):"get"===t.action?n(t.id,t.key):"remove"===t.action?i(t.id,t.key):"key"===t.action?r(t.id,t.key):"size"===t.action?c(t.id):"length"===t.action?s(t.id):"clear"===t.action&&d(t.id))}if(void 0===e)throw"must specify nameSpace(unique)";var u="cross-domain-local-message-caller",f="cross-domain-local-message-iframe",m={namespace:f,ns:e};window.addEventListener?window.addEventListener("message",l,!1):window.attachEvent("onmessage",l),function(){var t={namespace:f,id:"iframe-ready",ns:e};parent.postMessage(JSON.stringify(t),"*")}()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r={init:a};window.xdLocalStorageEmbedded=r,t.default={api:r}}]);
//# sourceMappingURL=xdLocalStorage.min.js.map